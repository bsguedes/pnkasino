<!-- templates/index.html -->

{% extends "base.html" %}

{% block content %}

{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
    {% for category, message in messages %}
        {% if category == 'error' %}
            <div class="notification is-danger">
               {{ message }}
            </div>
        {% else %}
            <div class="notification is-success">
               {{ message }}
            </div>
        {% endif %}
    {% endfor %}
{% endif %}
{% endwith %}

<h2 class="title">
  Admin Page
</h2>

<br/>
<h2 align="left">Edit Leagues</h2>
<br/>

<table class="table table-striped table-responsive table-bordered is-fullwidth">
<thead>
  <tr>
    <th>League Name</th>
    <th>Current State</th>
    <th colspan="2">Modify</th>
  </tr>
</thead>
<tbody>
    {% for item in leagues %}
    <tr>
       <td style="color:#363636">{{item['name']}}</td>
       <td style="color:#363636">{{item['state']}}</td>
       <td><form id="formleague{{item.id}}" action="/league/edit" method="post"><input type="hidden" name="id" value="{{item.id}}"/></form></td>
       <td><input class="button is-block is-info is-small" form="formleague{{item.id}}" type="submit" name="edit" value="Edit"/></td>
    </tr>
    {% endfor %}
</tbody>
</table>

<br/>
<h2 align="left">Add a New League</h2>
<br/>

<form method="POST" action="/league/create">
  <table class="table table-striped table-responsive table-bordered is-fullwidth">
    <tbody>
      <tr>
        <td>Create a new League</td>
        <td>
          <div class="control">
            <input class="input is-small" name="league_name" placeholder="League name" autofocus="">
          </div>
        </td>
        <td>
          <button class="button is-block is-info is-small is-fullwidth">Create</button>
        </td>
      </tr>
    </tbody>
  </table>
</form>

{% endblock %}